(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["settings"],{"3e8f":function(t,a){},"3f42":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content"},[e("div",{staticClass:"tableTop"},[e("el-button",{attrs:{type:"primary"},on:{click:t.openUser}},[t._v("添加用户")])],1),e("div",{staticClass:"table"},[e("Tables",{attrs:{data:t.table.data,columns:t.table.columns,pageShow:!1,loading:t.table.loading,tableOption:t.table.tableOption},on:{clickButton:t.clickButton}})],1),e("div",{staticClass:"addUser"},[e("Dailog",{attrs:{title:t.title,width:"35%",show:t.userShow},on:{"update:show":function(a){t.userShow=a},closeDialog:t.onCloseKey}},[e("div",{staticClass:"user-content",attrs:{slot:"content"},slot:"content"},[e("el-form",{ref:"formData",staticClass:"form",attrs:{model:t.formData,rules:t.rules}},[e("el-form-item",{attrs:{label:"用户名",prop:"name","label-width":t.formLabelWidth}},[e("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入用户名"},on:{input:t.nameChange},model:{value:t.formData.name,callback:function(a){t.$set(t.formData,"name",a)},expression:"formData.name"}})],1),e("el-form-item",{attrs:{label:"信箱",prop:"email","label-width":t.formLabelWidth}},[e("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入信箱"},on:{input:t.changeEmail},model:{value:t.formData.email,callback:function(a){t.$set(t.formData,"email",a)},expression:"formData.email"}})],1),t.isEdit?t._e():e("div",[e("el-form-item",{attrs:{label:"请输入密码",prop:"password","label-width":t.formLabelWidth}},[e("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入密码"},on:{input:t.changePwd},model:{value:t.formData.password,callback:function(a){t.$set(t.formData,"password",a)},expression:"formData.password"}})],1),e("el-form-item",{attrs:{label:"重复密码",prop:"password_confirmation","label-width":t.formLabelWidth}},[e("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入重复密码"},on:{input:t.changePwdCon},model:{value:t.formData.password_confirmation,callback:function(a){t.$set(t.formData,"password_confirmation",a)},expression:"formData.password_confirmation"}})],1)],1),t.isEdit?e("div",[e("el-form-item",{attrs:{label:"请输入原密码",prop:"old_password","label-width":t.formLabelWidth}},[e("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入密码"},on:{input:t.changeOldPwd},model:{value:t.formData.old_password,callback:function(a){t.$set(t.formData,"old_password",a)},expression:"formData.old_password"}})],1),e("el-form-item",{attrs:{label:"请输入新密码",prop:"password","label-width":t.formLabelWidth}},[e("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入密码"},on:{input:t.changePwd},model:{value:t.formData.password,callback:function(a){t.$set(t.formData,"password",a)},expression:"formData.password"}})],1),e("el-form-item",{attrs:{label:"重复新密码",prop:"password_confirmation","label-width":t.formLabelWidth}},[e("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"请输入重复密码"},on:{input:t.changePwdCon},model:{value:t.formData.password_confirmation,callback:function(a){t.$set(t.formData,"password_confirmation",a)},expression:"formData.password_confirmation"}})],1)],1):t._e(),e("el-form-item",{attrs:{label:"权限","label-width":t.formLabelWidth}},[e("el-select",{staticStyle:{width:"30%"},attrs:{placeholder:"请选择"},model:{value:t.formData.role,callback:function(a){t.$set(t.formData,"role",a)},expression:"formData.role"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("div",{staticClass:"footer"},[e("span",{staticClass:"submit",on:{click:function(a){return t.submitForm("formData")}}},[t._v("确定")]),e("span",{staticClass:"back",on:{click:t.back}},[t._v("返回")])])],1)])],1)])},n=[],i=(e("b0c0"),e("ac1f"),e("5319"),e("498a"),e("ade3")),r=e("bec3"),l=e("a261"),s=e("365c"),c=(e("3e8f"),{name:"Settings",components:{Tables:r["a"],Dailog:l["a"]},data:function(){var t,a=this,e=function(t,e,o){if(!a.formData.name||""===a.formData.name)return o(new Error("请输入用户名"));o()},o=function(t,e,o){var n=/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;return a.formData.email&&""!=a.formData.email?n.test(a.formData.email.trim())?void o():o(new Error("请输入正确的箱邮")):o(new Error("请输入信箱地址"))},n=function(t,e,o){return a.formData.old_password&&""!=a.formData.old_password?a.formData.old_password.trim().length<8?o(new Error("原密码最少八位")):void o():o(new Error("请输入原密码"))},r=function(t,e,o){return a.formData.password&&""!=a.formData.password?a.formData.password.trim().length<8?o(new Error("密码最少八位")):void o():o(new Error("请输入密码"))},l=function(t,e,o){return a.formData.password_confirmation&&""!=a.formData.password_confirmation?a.formData.password_confirmation.trim().length<8?o(new Error("密码最少八位")):a.formData.password_confirmation.trim()!==a.formData.password.trim()?o(new Error("两次输入密码不一致!")):void o():o(new Error("请再次输入密码"))};return{formLabelWidth:"30%",userShow:!1,title:"添加用户",isEdit:!1,options:[{value:1,label:"Admin"},{value:2,label:"Guest"}],formData:(t={id:null,name:"",email:"",password:"",old_password:"",password_confirmation:""},Object(i["a"])(t,"old_password",""),Object(i["a"])(t,"role",1),t),rules:{name:[{validator:e,trigger:"blur"}],email:[{validator:o,trigger:"blur"}],old_password:[{validator:n,trigger:"blur"}],password:[{validator:r,trigger:"blur"}],password_confirmation:[{validator:l,trigger:"blur"}]},table:{loading:!1,page:1,rows:10,total:0,columns:[{label:"ID",key:"id",width:"60"},{label:"用户名",key:"name"},{label:"权限",key:"role",width:"100",render:function(t){return 1===t.role?"Admin":"Guest"}},{label:"信箱",key:"email"},{label:"最后登录时间",key:"updated_at"},{label:"访问次数",key:"visit_times",width:"100"}],data:[],tableOption:{label:"操作",options:[{label:"编辑",bgColor:"#5bbfdf",methods:"edit"},{label:"删除",bgColor:"#fac167",methods:"del"}]}}}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.table.loading=!0,Object(s["j"])().then((function(a){if(void 0!==a&&200===a.code)t.table.data=a.data,t.table.loading=!1;else{var e=a.message;t.$alert("".concat(e),"温馨提示",{confirmButtonText:"确定"}),t.table.data=[],t.table.loading=!1}})).catch((function(a){t.table.loading=!1}))},openUser:function(){this.userShow=!0,this.isEdit=!1,this.title="添加新用户",this.formData.name="",this.formData.email="",this.formData.password=null,this.formData.password_confirmation=null,this.formData.role=1},back:function(){this.userShow=!1,this.formData.name="",this.formData.email="",this.formData.password=null,this.formData.password_confirmation=null,this.formData.role=1,this.$refs.formData.resetFields()},submitForm:function(t){var a=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;a.isEdit||Object(s["a"])(a.formData).then((function(t){if(void 0!==t&&200===t.code)a.userShow=!1,a.$message({message:"添加用户成功！",type:"success"}),a.getData();else{var e=t.message;a.$alert("".concat(e),"温馨提示",{confirmButtonText:"确定"})}})),a.isEdit&&Object(s["q"])(a.formData).then((function(t){if(void 0!==t&&200===t.code)a.userShow=!1,a.$message({message:"用户信息更新成功！",type:"success"}),a.getData();else{var e=t.message;a.$alert("".concat(e),"温馨提示",{confirmButtonText:"确定"})}}))}))},onCloseKey:function(){this.$refs.formData.resetFields()},clickButton:function(t){var a=this;"edit"===t.methods&&(this.userShow=!0,this.title="编辑",this.isEdit=!0,this.formData.id=t.row.id,this.formData.name=t.row.name,this.formData.email=t.row.email,this.formData.old_password=null,this.formData.password=null,this.formData.password_confirmation=null,this.formData.role=t.row.role),"del"===t.methods&&this.$confirm("此操作将永久删除该用户, 是否继续?","温馨提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=new FormData;e.append("id",t.row.id),Object(s["b"])(e).then((function(t){void 0!==t&&200===t.code&&(a.$message({type:"success",message:"删除用户成功!"}),a.getData())}))})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))},nameChange:function(t){this.formData.name=t.replace(/[, ]/g,"")},changeEmail:function(t){this.formData.email=t.replace(/[, ]/g,"")},changeOldPwd:function(t){this.formData.old_password=t.replace(/[, ]/g,"")},changePwd:function(t){this.formData.password=t.replace(/[, ]/g,"")},changePwdCon:function(t){this.formData.password_confirmation=t.replace(/[, ]/g,"")}}}),d=c,u=(e("6427"),e("2877")),m=Object(u["a"])(d,o,n,!1,null,"246b849e",null);a["default"]=m.exports},"498a":function(t,a,e){"use strict";var o=e("23e7"),n=e("58a8").trim,i=e("c8d2");o({target:"String",proto:!0,forced:i("trim")},{trim:function(){return n(this)}})},"52ac":function(t,a,e){},6427:function(t,a,e){"use strict";e("92b2")},"92b2":function(t,a,e){},a261:function(t,a,e){"use strict";var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"my-modal"},[e("el-dialog",{attrs:{title:t.title,width:t.width,visible:t.visible,show:t.show,center:"","close-on-click-modal":!1},on:{"update:visible":function(a){t.visible=a},close:t.closeDialog}},[e("div",{staticClass:"content mt20",staticStyle:{position:"relative"},style:t._height},[t._t("content")],2)])],1)},n=[],i=(e("a9e3"),{props:{width:{type:String,default:""},height:{type:[String,Number]},title:{type:String},show:{type:Boolean,default:!1}},data:function(){return{isShow:!1,visible:this.show}},computed:{_height:function(t){return"height:"+this.height+"px"}},watch:{show:function(){this.visible=this.show}},methods:{closeDialog:function(){this.$emit("closeDialog"),this.$emit("update:show",!1)}}}),r=i,l=(e("f63a"),e("2877")),s=Object(l["a"])(r,o,n,!1,null,"6d73a8e6",null);a["a"]=s.exports},bec3:function(t,a,e){"use strict";var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"table"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:t.data,stripe:""},on:{"sort-change":t.handleSortChange,"selection-change":t.selectionChange,"cell-click":t.copyUrl}},[""!==t.selection?e("el-table-column",{attrs:{type:t.selection,width:"55"}}):t._e(),"adRank"==t.curPage||"dashBoard"==t.curPage||"domainRank"==t.curPage?e("el-table-column",{attrs:{label:t.label,type:"index",width:"50",index:t.settingIndex}}):t._e(),t._l(t.columns,(function(a,o){return e("el-table-column",{key:o,attrs:{prop:a.key,width:a.width?a.width:"",sortable:!!a.sortable,label:a.label,"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(o){return[a.render?e("span",[t._v(" "+t._s(a.render(o.row))+" ")]):e("span",[t._v(t._s(o.row[a.key]))])]}}],null,!0)})})),t.tableOption.label?e("el-table-column",{attrs:{label:t.tableOption.label,align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(a){return t._l(t.tableOption.options,(function(o,n){return e("button",{key:n,staticClass:"btn",style:{"background-color":o.bgColor},attrs:{type:o.type,icon:o.icon,size:"mini"},on:{click:function(e){return t.handleButton(o.methods,a.row,a.$index)}}},[t._v(" "+t._s(o.label)+" ")])}))}}],null,!1,461408839)}):t._e()],2),e("div",{staticClass:"more",staticStyle:{"margin-top":"26px"}},[t._t("more")],2),t.pageShow?e("div",{staticStyle:{"margin-top":"20px"}},[t.total?e("el-pagination",{attrs:{background:"","current-page":t.page,"page-sizes":[10],"page-size":t.rows,layout:"prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1):t._e()],1)},n=[],i=(e("a9e3"),{props:{loading:{type:Boolean,default:!1},data:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},tableOption:{type:Object,default:function(){return{}}},page:{type:Number,default:function(){return 1}},rows:{type:Number,default:function(){return 10}},total:{type:Number,default:function(){return 0}},selection:{type:String,default:""},pageShow:{type:Boolean,default:!0},curPage:{type:String,default:""},label:{type:String,default:""}},mounted:function(){console.log("this._props",this._props)},methods:{handleSizeChange:function(t){this.$emit("sizeChange",t)},handleCurrentChange:function(t){this.$emit("pageChange",t)},handleButton:function(t,a,e){this.$emit("clickButton",{methods:t,row:a,index:e})},handleSortChange:function(t){this.$emit("sortChange",t)},selectionChange:function(t){this.$emit("selectionChange",t)},copyUrl:function(t,a,e){var o={raw:t,column:a,cell:e};this.$emit("copyUrl",o)},settingIndex:function(t){var a=0;return"dashBoard"==this.curPage?a=30*(this.page-1)+(t+1):"adRank"==this.curPage?a=(this.page-1)*this.rows+(t+1):"domainRank"==this.curPage&&(a=10*(this.page-1)+(t+1)),a}}}),r=i,l=(e("f8b7"),e("2877")),s=Object(l["a"])(r,o,n,!1,null,null,null);a["a"]=s.exports},c8d2:function(t,a,e){var o=e("d039"),n=e("5899"),i="​᠎";t.exports=function(t){return o((function(){return!!n[t]()||i[t]()!=i||n[t].name!==t}))}},f4cc:function(t,a,e){},f63a:function(t,a,e){"use strict";e("f4cc")},f8b7:function(t,a,e){"use strict";e("52ac")}}]);
//# sourceMappingURL=settings.84fa4222.js.map