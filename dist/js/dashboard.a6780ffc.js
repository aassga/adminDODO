(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{"292d":function(t,e,a){"use strict";a("b69f")},"52ac":function(t,e,a){},a261:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"my-modal"},[a("el-dialog",{attrs:{title:t.title,width:t.width,visible:t.visible,show:t.show,center:"","close-on-click-modal":!1},on:{"update:visible":function(e){t.visible=e},close:t.closeDialog}},[a("div",{staticClass:"content mt20",staticStyle:{position:"relative"},style:t._height},[t._t("content")],2)])],1)},o=[],i=(a("a9e3"),{props:{width:{type:String,default:""},height:{type:[String,Number]},title:{type:String},show:{type:Boolean,default:!1}},data:function(){return{isShow:!1,visible:this.show}},computed:{_height:function(t){return"height:"+this.height+"px"}},watch:{show:function(){this.visible=this.show}},methods:{closeDialog:function(){this.$emit("closeDialog"),this.$emit("update:show",!1)}}}),l=i,s=(a("f63a"),a("2877")),c=Object(s["a"])(l,n,o,!1,null,"6d73a8e6",null);e["a"]=c.exports},b69f:function(t,e,a){},b7b4:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("div",{staticClass:"table"},[a("Tables",{attrs:{data:t.table.data,columns:t.table.columns,page:t.table.page,rows:t.table.rows,total:t.table.total,loading:t.table.loading,tableOption:t.table.tableOption,curPage:t.table.curPage,label:t.table.label},on:{clickButton:t.clickButton,pageChange:t.pageChange,copyUrl:t.copyUrl}})],1),a("div",{staticClass:"addKey"},[a("Dailog",{attrs:{title:"设置備註欄內容",width:"32%",height:310,show:t.keyShow},on:{"update:show":function(e){t.keyShow=e}}},[a("div",{staticClass:"content",attrs:{slot:"content"},slot:"content"},[a("el-form",{staticClass:"form",attrs:{model:t.formData}},[a("el-input",{attrs:{type:"textarea",rows:10,maxlength:"200","show-word-limit":"",placeholder:"请输入備註欄內容"},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1),a("p",{staticClass:"tip"},[t._v("最多可輸入200字")]),a("div",{staticClass:"footer"},[a("span",{staticClass:"cancel",on:{click:t.cancel}},[t._v("取消")]),a("span",{staticClass:"confirm",on:{click:t.submit}},[t._v("保存")])])],1)])],1)])},o=[],i=(a("4160"),a("159b"),a("5530")),l=a("bec3"),s=a("a261"),c=a("de1d"),r=a("2f62"),u=a("365c"),d={name:"AdRank",components:{Tables:l["a"],Dailog:s["a"]},data:function(){return{params:{sortBy:"pm_count",sortAsc:"desc",page:1,pageCount:30,engine:localStorage.getItem("engine")},formData:{id:"",remark:""},textarea:"",keyText:"",keyShow:!1,title:"",table:{loading:!1,label:"排名",rows:30,total:0,curPage:"dashBoard",columns:[{label:"广告页面",key:"url",href:!0},{label:"排名占有量",key:"pm_count"},{label:"備註",key:"remark"}],data:[],tableOption:{label:"操作",options:[{label:"编辑",bgColor:"#5bbfdf",methods:"edit"}]}}}},methods:{getData:function(t){var e=this;this.table.loading=!0,Object(u["e"])(t).then((function(t){void 0!=t&&200==t.code&&(e.table.data=t.data.data,e.table.total=t.data.total,e.table.loading=!1,e.table.data.forEach((function(t){t.created_at=e.$moment(1e3*t.created_at).format("YYYY-MM-DD")})))})).catch((function(t){e.table.data=[],e.table.total=0,e.table.loading=!1}))},pageChange:function(t){this.params.page=t,this.getData(this.params)},clickButton:function(t){this.title="编辑",this.keyShow=!0,this.formData.id=t.row.id,this.formData.remark=t.row.remark},openKey:function(){this.keyShow=!0},submit:function(){var t=this;Object(u["n"])(this.formData).then((function(e){200===e.code&&"success"===e.status?(t.addKey=!1,t.$message({message:"编辑关键字成功！",type:"success"}),t.params.page=1,t.getData(t.params),t.keyShow=!1):400===e.code&&"error"===e.status&&(t.addKey=!1,t.$message({message:"備註欄位不可為空白！",type:"success"}))}))},cancel:function(){this.keyText="",this.keyShow=!1},copyUrl:function(t){var e=t.raw,a=t.column,n=e.url;"广告页面"==a.label&&Object(c["a"])(n)}},mounted:function(){this.getData(this.params)},computed:Object(i["a"])({},Object(r["b"])(["token","engine"])),watch:{engine:function(t,e){this.params.page=1,this.params.engine=t,this.getData(this.params),this.$forceUpdate()}}},h=d,p=(a("292d"),a("2877")),g=Object(p["a"])(h,n,o,!1,null,"1993ba24",null);e["default"]=g.exports},bec3:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%"},attrs:{"element-loading-text":"加载中",data:t.data,stripe:""},on:{"sort-change":t.handleSortChange,"selection-change":t.selectionChange,"cell-click":t.copyUrl}},[""!==t.selection?a("el-table-column",{attrs:{type:t.selection,width:"55"}}):t._e(),"adRank"==t.curPage||"dashBoard"==t.curPage||"domainRank"==t.curPage?a("el-table-column",{attrs:{label:t.label,type:"index",width:"50",index:t.settingIndex}}):t._e(),t._l(t.columns,(function(e,n){return a("el-table-column",{key:n,attrs:{prop:e.key,width:e.width?e.width:"",sortable:!!e.sortable,label:e.label,"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(n){return[e.render?a("span",[t._v(" "+t._s(e.render(n.row))+" ")]):a("span",[t._v(t._s(n.row[e.key]))])]}}],null,!0)})})),t.tableOption.label?a("el-table-column",{attrs:{label:t.tableOption.label,align:"center","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(t.tableOption.options,(function(n,o){return a("button",{key:o,staticClass:"btn",style:{"background-color":n.bgColor},attrs:{type:n.type,icon:n.icon,size:"mini"},on:{click:function(a){return t.handleButton(n.methods,e.row,e.$index)}}},[t._v(" "+t._s(n.label)+" ")])}))}}],null,!1,461408839)}):t._e()],2),a("div",{staticClass:"more",staticStyle:{"margin-top":"26px"}},[t._t("more")],2),t.pageShow?a("div",{staticStyle:{"margin-top":"20px"}},[t.total?a("el-pagination",{attrs:{background:"","current-page":t.page,"page-sizes":[10],"page-size":t.rows,layout:"prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1):t._e()],1)},o=[],i=(a("a9e3"),{props:{loading:{type:Boolean,default:!1},data:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},tableOption:{type:Object,default:function(){return{}}},page:{type:Number,default:function(){return 1}},rows:{type:Number,default:function(){return 10}},total:{type:Number,default:function(){return 0}},selection:{type:String,default:""},pageShow:{type:Boolean,default:!0},curPage:{type:String,default:""},label:{type:String,default:""}},mounted:function(){console.log("this._props",this._props)},methods:{handleSizeChange:function(t){this.$emit("sizeChange",t)},handleCurrentChange:function(t){this.$emit("pageChange",t)},handleButton:function(t,e,a){this.$emit("clickButton",{methods:t,row:e,index:a})},handleSortChange:function(t){this.$emit("sortChange",t)},selectionChange:function(t){this.$emit("selectionChange",t)},copyUrl:function(t,e,a){var n={raw:t,column:e,cell:a};this.$emit("copyUrl",n)},settingIndex:function(t){var e=0;return"dashBoard"==this.curPage?e=30*(this.page-1)+(t+1):"adRank"==this.curPage?e=(this.page-1)*this.rows+(t+1):"domainRank"==this.curPage&&(e=10*(this.page-1)+(t+1)),e}}}),l=i,s=(a("f8b7"),a("2877")),c=Object(s["a"])(l,n,o,!1,null,null,null);e["a"]=c.exports},de1d:function(t,e,a){"use strict";a("c975");e["a"]=function(t){if(""!=t){var e=document.createElement("input");document.body.appendChild(e),e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e),t.indexOf("http")<0&&(t="http://"+t),window.open(t),console.log(t)}}},f4cc:function(t,e,a){},f63a:function(t,e,a){"use strict";a("f4cc")},f8b7:function(t,e,a){"use strict";a("52ac")}}]);
//# sourceMappingURL=dashboard.a6780ffc.js.map