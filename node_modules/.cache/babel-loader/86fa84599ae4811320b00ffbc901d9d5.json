{"remainingRequest":"D:\\domain\\node_modules\\babel-loader\\lib\\index.js!D:\\domain\\src\\router\\index.js","dependencies":[{"path":"D:\\domain\\src\\router\\index.js","mtime":1614154314967},{"path":"D:\\domain\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\domain\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwoKdmFyIF90aGlzID0gdGhpczsKCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IFJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IHsgc2V0TG9jYWwgfSBmcm9tICdfdXRpbC91dGlscy5qcyc7CmltcG9ydCB7IGdldFVzZXJJbmZvIH0gZnJvbSAiQC9hcGkiOwp2YXIgb3JpZ2luYWxQdXNoID0gUm91dGVyLnByb3RvdHlwZS5wdXNoOwoKUm91dGVyLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gcHVzaChsb2NhdGlvbikgewogIHJldHVybiBvcmlnaW5hbFB1c2guY2FsbCh0aGlzLCBsb2NhdGlvbikuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgcmV0dXJuIGVycjsKICB9KTsKfTsKClZ1ZS51c2UoVnVlUm91dGVyKTsKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogJy8nLAogIHJlZGlyZWN0OiAiL2xvZ2luIgp9LCB7CiAgcGF0aDogIi9sb2dpbiIsCiAgbmFtZTogIkxvZ2luIiwKICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgIHJldHVybiBpbXBvcnQoCiAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiAiTG9naW4iICovCiAgICAnQC92aWV3cy9Mb2dpbi9Mb2dpbi52dWUnKTsKICB9Cn0sIHsKICBwYXRoOiAiL2RvbWFpbiIsCiAgbmFtZTogImRvbWFpbiIsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KAogICAgLyogd2VicGFja0NodW5rTmFtZTogImRvbWFpbiIgKi8KICAgICdAL3ZpZXdzL0RvbWFpbi9Eb21haW4udnVlJyk7CiAgfSwKICBjaGlsZHJlbjogW3sKICAgIHBhdGg6ICJob21lIiwKICAgIG5hbWU6ICJIb21lIiwKICAgIC8vIOmmlumhtQogICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoCiAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6ICJob21lIiAqLwogICAgICAnQC92aWV3cy9Ib21lL0hvbWUudnVlJyk7CiAgICB9CiAgfSwgewogICAgcGF0aDogImFkUmFuayIsCiAgICBuYW1lOiAiQWRSYW5rIiwKICAgIC8vIOWfn+WQjeaOkuihjOamnAogICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoCiAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6ICJhZFJhbmsiICovCiAgICAgICdAL3ZpZXdzL0FkUmFuay9BZFJhbmsudnVlJyk7CiAgICB9CiAgfSwgewogICAgcGF0aDogImRhc2hib2FyZCIsCiAgICBuYW1lOiAiZGFzaGJvYXJkIiwKICAgIC8vIOW5v+WRiuaOkuihjOamnAogICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoCiAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6ICJkYXNoYm9hcmQiICovCiAgICAgICdAL3ZpZXdzL2Rhc2hib2FyZC9kYXNoYm9hcmQudnVlJyk7CiAgICB9CiAgfSwgewogICAgcGF0aDogImRvbWFpblJhbmsiLAogICAgbmFtZTogIkRvbWFpblJhbmsiLAogICAgLy8g6K6+5a6a5YWz6ZSu5a2XCiAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgKICAgICAgLyogd2VicGFja0NodW5rTmFtZTogImRvbWFpblJhbmsiICovCiAgICAgICdAL3ZpZXdzL0RvbWFpblJhbmsvRG9tYWluUmFuay52dWUnKTsKICAgIH0KICB9LCB7CiAgICBwYXRoOiAic2V0dGluZ3MiLAogICAgbmFtZTogIlNldHRpbmdzIiwKICAgIC8v566h55CGCiAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgKICAgICAgLyogd2VicGFja0NodW5rTmFtZTogInNldHRpbmdzIiAqLwogICAgICAnQC92aWV3cy9TZXR0aW5ncy9TZXR0aW5ncy52dWUnKTsKICAgIH0KICB9XQp9LCB7CiAgcGF0aDogIioiLAogIHJlZGlyZWN0OiAiL2xvZ2luIgp9XTsKdmFyIHJvdXRlciA9IG5ldyBWdWVSb3V0ZXIoewogIG1vZGU6ICdoYXNoJywKICAvLyBiYXNlOiBwcm9jZXNzLmVudi5CQVNFX1VSTCwKICByb3V0ZXM6IHJvdXRlcwp9KTsgLy/lsI7oiKrlrojooZsKCnJvdXRlci5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkgewogIC8v5Yik5pa3dG9rZW7mmK/lkKblpLHmlYgKICB2YXIgaXNMb2dpbiA9IGZhbHNlOwoKICBpZiAodG8ubmFtZSAhPT0gIkxvZ2luIikgewogICAgZ2V0VXNlckluZm8oe30pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICBpZiAocmVzLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgaXNMb2dpbiA9IHRydWU7CiAgICAgICAgc2V0TG9jYWwoJ2VuZ2luZScsIHJlcy5kYXRhLnVzZXIuZW5naW5lKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBuZXh0KHsKICAgICAgICAgIHBhdGg6ICcvbG9naW4nCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgbmV4dCh7CiAgICAgICAgICBwYXRoOiAnL2xvZ2luJwogICAgICAgIH0pOwogICAgICB9LCAyMDAwKTsKICAgICAgYWxlcnQoIuiri+azqOaEj++8mueUseaWvOaCqOmBjuaWvOmgu+e5gei3s+i9iemggemdou+8jOWboOatpOezu+e1seWIpOWumueCuuaDoeaEj+ihjOeCuu+8jOWNs+Wwh+WwjuWQkeeZu+WFpemgge+8jOisneisneOAgiIpOwogICAgfSk7CiAgfSAvL+WcqOeZu+WFpeeLgOaFi+S4i+WwjuWIsOWFtuS7lumggemdouWJh+i/lOWbnmhvbWXpoIEKCgogIGlmICh0by5wYXRoICE9ICIvZG9tYWluIiAmJiB0by5wYXRoICE9ICIvZG9tYWluL2hvbWUiICYmIHRvLnBhdGggIT0gIi9kb21haW4vYWRSYW5rIiAmJiB0by5wYXRoICE9ICIvZG9tYWluL2Rhc2hib2FyZCIgJiYgdG8ucGF0aCAhPSAiL2RvbWFpbi9kb21haW5SYW5rIiAmJiB0by5wYXRoICE9ICIvZG9tYWluL3NldHRpbmdzIiAmJiBpc0xvZ2luKSB7CiAgICBfdGhpcy4kcm91dGVyLnB1c2goewogICAgICBwYXRoOiAiL2hvbWUiCiAgICB9KTsKICB9IGVsc2UgbmV4dCgpOwp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"sources":["D:/domain/src/router/index.js"],"names":["Vue","VueRouter","Router","setLocal","getUserInfo","originalPush","prototype","push","location","call","catch","err","use","routes","path","redirect","name","component","children","router","mode","beforeEach","to","from","next","isLogin","then","res","code","data","user","engine","setTimeout","alert","$router"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport Router from 'vue-router'\r\nimport { setLocal } from '_util/utils.js'\r\nimport { getUserInfo } from \"@/api\"\r\nconst originalPush = Router.prototype.push\r\nRouter.prototype.push = function push(location) {\r\n  return originalPush.call(this, location).catch(err => err)\r\n}\r\nVue.use(VueRouter)\r\n\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    redirect: \"/login\"\r\n  },\r\n  {\r\n    path: \"/login\",\r\n    name: \"Login\",\r\n    component: () => import(/* webpackChunkName: \"Login\" */ '@/views/Login/Login.vue'),\r\n  },\r\n  {\r\n    path: \"/domain\",\r\n    name: \"domain\",\r\n    component: () => import(/* webpackChunkName: \"domain\" */ '@/views/Domain/Domain.vue'),\r\n    children: [\r\n      {\r\n        path: \"home\",\r\n        name: \"Home\",  // 首页\r\n        component: () => import(/* webpackChunkName: \"home\" */ '@/views/Home/Home.vue'),\r\n      },\r\n      {\r\n        path: \"adRank\",\r\n        name: \"AdRank\", // 域名排行榜\r\n        component: () => import(/* webpackChunkName: \"adRank\" */ '@/views/AdRank/AdRank.vue'),\r\n      },\r\n      {\r\n        path: \"dashboard\",\r\n        name: \"dashboard\", // 广告排行榜\r\n        component: () => import(/* webpackChunkName: \"dashboard\" */ '@/views/dashboard/dashboard.vue'),\r\n      },\r\n      {\r\n        path: \"domainRank\",\r\n        name: \"DomainRank\",  // 设定关键字\r\n        component: () => import(/* webpackChunkName: \"domainRank\" */ '@/views/DomainRank/DomainRank.vue'),\r\n      },\r\n      {\r\n        path: \"settings\",\r\n        name: \"Settings\", //管理\r\n        component: () => import(/* webpackChunkName: \"settings\" */ '@/views/Settings/Settings.vue'),\r\n      },\r\n    ]\r\n  },\r\n  {\r\n    path: \"*\",\r\n    redirect: \"/login\"\r\n  }\r\n]\r\n\r\nconst router = new VueRouter({\r\n  mode: 'hash',\r\n  // base: process.env.BASE_URL,\r\n  routes\r\n})\r\n\r\n//導航守衛\r\nrouter.beforeEach((to, from, next) => {\r\n  //判斷token是否失效\r\n\r\n\r\n  let isLogin = false;\r\n  if (to.name !== \"Login\") {\r\n\r\n    getUserInfo({}).then((res) => {\r\n      if (res.code == 200) {\r\n        isLogin = true;\r\n        setLocal('engine', res.data.user.engine);\r\n      } else {\r\n        next({ path: '/login' });\r\n      }\r\n    }).catch((err) => {\r\n      setTimeout(() => {\r\n        next({ path: '/login' });\r\n      }, 2000);\r\n      alert(\"請注意：由於您過於頻繁跳轉頁面，因此系統判定為惡意行為，即將導向登入頁，謝謝。\");\r\n    })\r\n  }\r\n\r\n  //在登入狀態下導到其他頁面則返回home頁\r\n  if (to.path != \"/domain\"\r\n    && to.path != \"/domain/home\"\r\n    && to.path != \"/domain/adRank\"\r\n    && to.path != \"/domain/dashboard\"\r\n    && to.path != \"/domain/domainRank\"\r\n    && to.path != \"/domain/settings\"\r\n    && isLogin) {\r\n    this.$router.push({ path: \"/home\" });\r\n  }\r\n  else next();\r\n});\r\n\r\n\r\nexport default router\r\n"]}]}