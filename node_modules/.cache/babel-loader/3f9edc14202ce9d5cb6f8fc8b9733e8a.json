{"remainingRequest":"D:\\domain\\node_modules\\babel-loader\\lib\\index.js!D:\\domain\\src\\router\\index.js","dependencies":[{"path":"D:\\domain\\src\\router\\index.js","mtime":1614162173804},{"path":"D:\\domain\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\domain\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwoKdmFyIF90aGlzID0gdGhpczsKCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IFJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IHsgc2V0TG9jYWwgfSBmcm9tICdfdXRpbC91dGlscy5qcyc7CmltcG9ydCB7IGdldFVzZXJJbmZvIH0gZnJvbSAiQC9hcGkiOwp2YXIgb3JpZ2luYWxQdXNoID0gUm91dGVyLnByb3RvdHlwZS5wdXNoOwoKUm91dGVyLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gcHVzaChsb2NhdGlvbikgewogIHJldHVybiBvcmlnaW5hbFB1c2guY2FsbCh0aGlzLCBsb2NhdGlvbikuY2F0Y2goZnVuY3Rpb24gKGVycikgewogICAgcmV0dXJuIGVycjsKICB9KTsKfTsKClZ1ZS51c2UoVnVlUm91dGVyKTsKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogJy8nLAogIHJlZGlyZWN0OiAiL2xvZ2luIgp9LCB7CiAgcGF0aDogIi9sb2dpbiIsCiAgbmFtZTogIkxvZ2luIiwKICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgIHJldHVybiBpbXBvcnQoCiAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiAiTG9naW4iICovCiAgICAnQC92aWV3cy9Mb2dpbi9Mb2dpbi52dWUnKTsKICB9Cn0sIHsKICBwYXRoOiAiL2RvbWFpbiIsCiAgbmFtZTogImRvbWFpbiIsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KAogICAgLyogd2VicGFja0NodW5rTmFtZTogImRvbWFpbiIgKi8KICAgICdAL3ZpZXdzL0RvbWFpbi9Eb21haW4udnVlJyk7CiAgfSwKICBjaGlsZHJlbjogW3sKICAgIHBhdGg6ICJob21lIiwKICAgIG5hbWU6ICJIb21lIiwKICAgIC8vIOmmlumhtQogICAgbWV0YTogewogICAgICB0aXRsZTogJ+mmlumhtScKICAgIH0sCiAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgKICAgICAgLyogd2VicGFja0NodW5rTmFtZTogImhvbWUiICovCiAgICAgICdAL3ZpZXdzL0hvbWUvSG9tZS52dWUnKTsKICAgIH0KICB9LCB7CiAgICBwYXRoOiAiYWRSYW5rIiwKICAgIG5hbWU6ICJBZFJhbmsiLAogICAgLy8g5Z+f5ZCN5o6S6KGM5qacCiAgICBtZXRhOiB7CiAgICAgIHRpdGxlOiAn5Z+f5ZCN5o6S6KGM5qacJwogICAgfSwKICAgIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgICByZXR1cm4gaW1wb3J0KAogICAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiAiYWRSYW5rIiAqLwogICAgICAnQC92aWV3cy9BZFJhbmsvQWRSYW5rLnZ1ZScpOwogICAgfQogIH0sIHsKICAgIHBhdGg6ICJkYXNoYm9hcmQiLAogICAgbmFtZTogImRhc2hib2FyZCIsCiAgICAvLyDlub/lkYrmjpLooYzmppwKICAgIG1ldGE6IHsKICAgICAgdGl0bGU6ICflub/lkYrmjpLooYzmppwnCiAgICB9LAogICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoCiAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6ICJkYXNoYm9hcmQiICovCiAgICAgICdAL3ZpZXdzL2Rhc2hib2FyZC9kYXNoYm9hcmQudnVlJyk7CiAgICB9CiAgfSwgewogICAgcGF0aDogImRvbWFpblJhbmsiLAogICAgbmFtZTogIkRvbWFpblJhbmsiLAogICAgLy8g6K6+5a6a5YWz6ZSu5a2XCiAgICBtZXRhOiB7CiAgICAgIHRpdGxlOiAn6K6+5a6a5YWz6ZSu5a2XJwogICAgfSwKICAgIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgICByZXR1cm4gaW1wb3J0KAogICAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiAiZG9tYWluUmFuayIgKi8KICAgICAgJ0Avdmlld3MvRG9tYWluUmFuay9Eb21haW5SYW5rLnZ1ZScpOwogICAgfQogIH0sIHsKICAgIHBhdGg6ICJzZXR0aW5ncyIsCiAgICBuYW1lOiAiU2V0dGluZ3MiLAogICAgLy/nrqHnkIYKICAgIG1ldGE6IHsKICAgICAgdGl0bGU6ICfnrqHnkIYnCiAgICB9LAogICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICAgIHJldHVybiBpbXBvcnQoCiAgICAgIC8qIHdlYnBhY2tDaHVua05hbWU6ICJzZXR0aW5ncyIgKi8KICAgICAgJ0Avdmlld3MvU2V0dGluZ3MvU2V0dGluZ3MudnVlJyk7CiAgICB9CiAgfV0KfSwgewogIHBhdGg6ICIqIiwKICByZWRpcmVjdDogIi9sb2dpbiIKfV07CnZhciByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHsKICBtb2RlOiAnaGFzaCcsCiAgLy8gYmFzZTogcHJvY2Vzcy5lbnYuQkFTRV9VUkwsCiAgcm91dGVzOiByb3V0ZXMKfSk7IC8v5bCO6Iiq5a6I6KGbCgpyb3V0ZXIuYmVmb3JlRWFjaChmdW5jdGlvbiAodG8sIGZyb20sIG5leHQpIHsKICAvL+WIpOaWt3Rva2Vu5piv5ZCm5aSx5pWICiAgdmFyIGlzTG9naW4gPSBmYWxzZTsKCiAgaWYgKHRvLm5hbWUgIT09ICJMb2dpbiIpIHsKICAgIGdldFVzZXJJbmZvKHt9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgaWYgKHJlcy5jb2RlID09IDIwMCkgewogICAgICAgIGlzTG9naW4gPSB0cnVlOwogICAgICAgIHNldExvY2FsKCdlbmdpbmUnLCByZXMuZGF0YS51c2VyLmVuZ2luZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV4dCh7CiAgICAgICAgICBwYXRoOiAnL2xvZ2luJwogICAgICAgIH0pOwogICAgICB9CiAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIG5leHQoewogICAgICAgICAgcGF0aDogJy9sb2dpbicKICAgICAgICB9KTsKICAgICAgfSwgMjAwMCk7CiAgICAgIGFsZXJ0KCLoq4vms6jmhI/vvJrnlLHmlrzmgqjpgY7mlrzpoLvnuYHot7PovYnpoIHpnaLvvIzlm6DmraTns7vntbHliKTlrprngrrmg6HmhI/ooYzngrrvvIzljbPlsIflsI7lkJHnmbvlhaXpoIHvvIzorJ3orJ3jgIIiKTsKICAgIH0pOwogIH0gLy/lnKjnmbvlhaXni4DmhYvkuIvlsI7liLDlhbbku5bpoIHpnaLliYfov5Tlm55ob21l6aCBCiAgLy8gaWYgKHRvLnBhdGggIT0gIi9kb21haW4iCiAgLy8gICAmJiB0by5wYXRoICE9ICIvZG9tYWluL2hvbWUiCiAgLy8gICAmJiB0by5wYXRoICE9ICIvZG9tYWluL2FkUmFuayIKICAvLyAgICYmIHRvLnBhdGggIT0gIi9kb21haW4vZGFzaGJvYXJkIgogIC8vICAgJiYgdG8ucGF0aCAhPSAiL2RvbWFpbi9kb21haW5SYW5rIgogIC8vICAgJiYgdG8ucGF0aCAhPSAiL2RvbWFpbi9zZXR0aW5ncyIKICAvLyAgICYmIGlzTG9naW4pIHsKICAvLyAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogIi9ob21lIiB9KTsKICAvLyB9CiAgLy8gZWxzZSBuZXh0KCk7CgoKICBpZiAoaXNMb2dpbikgewogICAgX3RoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgcGF0aDogIi9ob21lIgogICAgfSk7CiAgfSBlbHNlIG5leHQoKTsKfSk7CmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"sources":["D:/domain/src/router/index.js"],"names":["Vue","VueRouter","Router","setLocal","getUserInfo","originalPush","prototype","push","location","call","catch","err","use","routes","path","redirect","name","component","children","meta","title","router","mode","beforeEach","to","from","next","isLogin","then","res","code","data","user","engine","setTimeout","alert","$router"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport Router from 'vue-router'\r\nimport { setLocal } from '_util/utils.js'\r\nimport { getUserInfo } from \"@/api\"\r\nconst originalPush = Router.prototype.push\r\nRouter.prototype.push = function push(location) {\r\n  return originalPush.call(this, location).catch(err => err)\r\n}\r\nVue.use(VueRouter)\r\n\r\n\r\nconst routes = [\r\n  {\r\n    path: '/',\r\n    redirect: \"/login\"\r\n  },\r\n  {\r\n    path: \"/login\",\r\n    name: \"Login\",\r\n    component: () => import(/* webpackChunkName: \"Login\" */ '@/views/Login/Login.vue'),\r\n  },\r\n  {\r\n    path: \"/domain\",\r\n    name: \"domain\",\r\n    component: () => import(/* webpackChunkName: \"domain\" */ '@/views/Domain/Domain.vue'),\r\n    children: [\r\n      {\r\n        path: \"home\",\r\n        name: \"Home\",  // 首页\r\n        meta: {\r\n          title: '首页',\r\n        },\r\n        component: () => import(/* webpackChunkName: \"home\" */ '@/views/Home/Home.vue'),\r\n      },\r\n      {\r\n        path: \"adRank\",\r\n        name: \"AdRank\", // 域名排行榜\r\n        meta: {\r\n          title: '域名排行榜',\r\n        },\r\n        component: () => import(/* webpackChunkName: \"adRank\" */ '@/views/AdRank/AdRank.vue'),\r\n      },\r\n      {\r\n        path: \"dashboard\",\r\n        name: \"dashboard\", // 广告排行榜\r\n        meta: {\r\n          title: '广告排行榜',\r\n        },\r\n        component: () => import(/* webpackChunkName: \"dashboard\" */ '@/views/dashboard/dashboard.vue'),\r\n      },\r\n      {\r\n        path: \"domainRank\",\r\n        name: \"DomainRank\",  // 设定关键字\r\n        meta: {\r\n          title: '设定关键字',\r\n        },\r\n        component: () => import(/* webpackChunkName: \"domainRank\" */ '@/views/DomainRank/DomainRank.vue'),\r\n      },\r\n      {\r\n        path: \"settings\",\r\n        name: \"Settings\", //管理\r\n        meta: {\r\n          title: '管理',\r\n        },\r\n        component: () => import(/* webpackChunkName: \"settings\" */ '@/views/Settings/Settings.vue'),\r\n      },\r\n    ]\r\n  },\r\n  {\r\n    path: \"*\",\r\n    redirect: \"/login\"\r\n  }\r\n]\r\n\r\nconst router = new VueRouter({\r\n  mode: 'hash',\r\n  // base: process.env.BASE_URL,\r\n  routes\r\n})\r\n\r\n//導航守衛\r\nrouter.beforeEach((to, from, next) => {\r\n  //判斷token是否失效\r\n  let isLogin = false;\r\n  if (to.name !== \"Login\") {\r\n\r\n    getUserInfo({}).then((res) => {\r\n      if (res.code == 200) {\r\n        isLogin = true;\r\n        setLocal('engine', res.data.user.engine);\r\n      } else {\r\n        next({ path: '/login' });\r\n      }\r\n    }).catch((err) => {\r\n      setTimeout(() => {\r\n        next({ path: '/login' });\r\n      }, 2000);\r\n      alert(\"請注意：由於您過於頻繁跳轉頁面，因此系統判定為惡意行為，即將導向登入頁，謝謝。\");\r\n    })\r\n  }\r\n\r\n  //在登入狀態下導到其他頁面則返回home頁\r\n  // if (to.path != \"/domain\"\r\n  //   && to.path != \"/domain/home\"\r\n  //   && to.path != \"/domain/adRank\"\r\n  //   && to.path != \"/domain/dashboard\"\r\n  //   && to.path != \"/domain/domainRank\"\r\n  //   && to.path != \"/domain/settings\"\r\n  //   && isLogin) {\r\n  //   this.$router.push({ path: \"/home\" });\r\n  // }\r\n  // else next();\r\n  if (isLogin) {\r\n    this.$router.push({ path: \"/home\" });\r\n  }\r\n  else next();\r\n});\r\n\r\n\r\nexport default router\r\n"]}]}