{"remainingRequest":"D:\\domain\\node_modules\\thread-loader\\dist\\cjs.js!D:\\domain\\node_modules\\babel-loader\\lib\\index.js!D:\\domain\\src\\libs\\axios\\axios.js","dependencies":[{"path":"D:\\domain\\src\\libs\\axios\\axios.js","mtime":1614154314963},{"path":"D:\\domain\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\domain\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\domain\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkQ6L2RvbWFpbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiRDovZG9tYWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRDovZG9tYWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBxcyBmcm9tICdxcyc7IC8vIGltcG9ydCB7IFRvYXN0IH0gZnJvbSAnbWludC11aScKCmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAnLi4vdXRpbHMvdXRpbHMuanMnOwpheGlvcy5kZWZhdWx0cy5oZWFkZXJzLnBvc3RbJ0NvbnRlbnQtVHlwZSddID0gIidDb250ZW50LVR5cGUnOiAnbXVsdGlwYXJ0L2Zvcm0tZGF0YSciOyAvL2F4aW9zLmRlZmF1bHRzLmhlYWRlcnMucG9zdFsnQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbicKCmF4aW9zLmRlZmF1bHRzLnRpbWVvdXQgPSA0ODAwMDsgLy8g5YmN56uv55qEYXhpb3Pmt7vliqB3aXRoQ3JlZGVudGlhbHPlsZ7mgKcKCmF4aW9zLmRlZmF1bHRzLndpdGhDcmVkZW50aWFscyA9IHRydWU7Cgp2YXIgSHR0cFJlcXVlc3QgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEh0dHBSZXF1ZXN0KCkgewogICAgdmFyIGJhc2VVcmwgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IGJhc2VVUkw7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEh0dHBSZXF1ZXN0KTsKCiAgICB0aGlzLmJhc2VVcmwgPSBiYXNlVXJsOyAvLyBjb25zb2xlLmxvZyh0aGlzLmJhc2VVcmwpCiAgfQoKICBfY3JlYXRlQ2xhc3MoSHR0cFJlcXVlc3QsIFt7CiAgICBrZXk6ICJnZXRJbnNpZGVDb25maWciLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc2lkZUNvbmZpZygpIHsKICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICBiYXNlVVJMOiB0aGlzLmJhc2VVcmwKICAgICAgfTsKICAgICAgcmV0dXJuIGNvbmZpZzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpbnRlcmNlcHRvcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGludGVyY2VwdG9ycyhpbnN0YW5jZSwgdXJsKSB7CiAgICAgIC8vIOivt+axguaLpuaIqgogICAgICBpbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogICAgICAgIGlmIChjb25maWcubWV0aG9kID09PSAnZ2V0JykgewogICAgICAgICAgY29uZmlnLnBhcmFtcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY29uZmlnLnBhcmFtcyksIHt9LCB7CiAgICAgICAgICAgIF90OiBuZXcgRGF0ZSgpLmdldFRpbWUoKQogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoY29uZmlnLm1ldGhvZCA9PT0gJ3Bvc3QnKSB7CiAgICAgICAgICBjb25maWcuaGVhZGVycy5wb3N0WydDb250ZW50LVR5cGUnXSA9ICInQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnIjsKICAgICAgICB9CgogICAgICAgIGlmIChnZXRUb2tlbikgewogICAgICAgICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9ICdCZWFyZXIgJyArICIiLmNvbmNhdChsb2NhbFN0b3JhZ2UudG9rZW4pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGNvbmZpZy5pc0Zvcm0pIHsKICAgICAgICAgIGNvbmZpZy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnOwogICAgICAgICAgY29uZmlnLmRhdGEgPSBxcy5zdHJpbmdpZnkoY29uZmlnLmRhdGEpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGNvbmZpZzsKICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgICAgfSk7IC8vIOWTjeW6lOaLpuaIqgoKICAgICAgaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgcmVzID0gcmVzLmRhdGE7CgogICAgICAgIGlmIChyZXMuY29kZSA9PSAxMDAyMSkge30gZWxzZSB7CiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlcyk7CiAgICAgICAgfQogICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXF1ZXN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXF1ZXN0KG9wdGlvbnMsIG5vU2hvd1RpcCkgewogICAgICB2YXIgaW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoKTsKICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24odGhpcy5nZXRJbnNpZGVDb25maWcoKSwgb3B0aW9ucyk7CiAgICAgIHRoaXMuaW50ZXJjZXB0b3JzKGluc3RhbmNlLCBvcHRpb25zLnVybCk7CiAgICAgIGluc3RhbmNlLm5vU2hvd1RpcCA9IG5vU2hvd1RpcDsKICAgICAgcmV0dXJuIGluc3RhbmNlKG9wdGlvbnMpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEh0dHBSZXF1ZXN0Owp9KCk7CgpleHBvcnQgZGVmYXVsdCBIdHRwUmVxdWVzdDs="},{"version":3,"sources":["D:/domain/src/libs/axios/axios.js"],"names":["axios","qs","getToken","defaults","headers","post","timeout","withCredentials","HttpRequest","baseUrl","baseURL","config","instance","url","interceptors","request","use","method","params","_t","Date","getTime","Authorization","localStorage","token","isForm","data","stringify","error","Promise","reject","response","res","code","resolve","options","noShowTip","create","Object","assign","getInsideConfig"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,IAAf,C,CACA;;AACA,SAASC,QAAT,QAAwB,mBAAxB;AACAF,KAAK,CAACG,QAAN,CAAeC,OAAf,CAAuBC,IAAvB,CAA4B,cAA5B,IAA8C,uCAA9C,C,CACA;;AACAL,KAAK,CAACG,QAAN,CAAeG,OAAf,GAAyB,KAAzB,C,CAEA;;AACAN,KAAK,CAACG,QAAN,CAAeI,eAAf,GAAiC,IAAjC;;IAEMC,W;AACF,yBAA+B;AAAA,QAAnBC,OAAmB,uEAATC,OAAS;;AAAA;;AAC7B,SAAKD,OAAL,GAAeA,OAAf,CAD6B,CAE7B;AACD;;;;sCACiB;AAChB,UAAME,MAAM,GAAG;AACbD,QAAAA,OAAO,EAAE,KAAKD;AADD,OAAf;AAGA,aAAOE,MAAP;AACD;;;iCACYC,Q,EAAUC,G,EAAK;AAC1B;AACAD,MAAAA,QAAQ,CAACE,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CAAkC,UAAAL,MAAM,EAAI;AAC1C,YAAIA,MAAM,CAACM,MAAP,KAAkB,KAAtB,EAA6B;AAC3BN,UAAAA,MAAM,CAACO,MAAP,mCACKP,MAAM,CAACO,MADZ;AAEEC,YAAAA,EAAE,EAAE,IAAIC,IAAJ,GAAWC,OAAX;AAFN;AAID;;AACD,YAAGV,MAAM,CAACM,MAAP,KAAgB,MAAnB,EAA0B;AACxBN,UAAAA,MAAM,CAACP,OAAP,CAAeC,IAAf,CAAoB,cAApB,IAAsC,uCAAtC;AACD;;AAED,YAAGH,QAAH,EAAY;AACTS,UAAAA,MAAM,CAACP,OAAP,CAAekB,aAAf,GAA+B,sBAAaC,YAAY,CAACC,KAA1B,CAA/B;AACF;;AAED,YAAIb,MAAM,CAACc,MAAX,EAAkB;AAChBd,UAAAA,MAAM,CAACP,OAAP,CAAe,cAAf,IAAiC,mCAAjC;AACAO,UAAAA,MAAM,CAACe,IAAP,GAAczB,EAAE,CAAC0B,SAAH,CAAahB,MAAM,CAACe,IAApB,CAAd;AACD;;AAED,eAAOf,MAAP;AACD,OArBD,EAqBG,UAAAiB,KAAK,EAAI;AACV,eAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,OAvBD,EAF0B,CA0B1B;;AACAhB,MAAAA,QAAQ,CAACE,YAAT,CAAsBiB,QAAtB,CAA+Bf,GAA/B,CAAmC,UAAAgB,GAAG,EAAI;AACxCA,QAAAA,GAAG,GAAGA,GAAG,CAACN,IAAV;;AACA,YAAIM,GAAG,CAACC,IAAJ,IAAY,KAAhB,EAAuB,CAEtB,CAFD,MAEK;AACH,iBAAOJ,OAAO,CAACK,OAAR,CAAgBF,GAAhB,CAAP;AACD;AAEF,OARD,EAQG,UAAAJ,KAAK,EAAI;AACV,eAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,OAVD;AAWD;;;4BACOO,O,EAASC,S,EAAW;AAC1B,UAAMxB,QAAQ,GAAGZ,KAAK,CAACqC,MAAN,EAAjB;AACAF,MAAAA,OAAO,GAAGG,MAAM,CAACC,MAAP,CAAc,KAAKC,eAAL,EAAd,EAAsCL,OAAtC,CAAV;AACA,WAAKrB,YAAL,CAAkBF,QAAlB,EAA4BuB,OAAO,CAACtB,GAApC;AACAD,MAAAA,QAAQ,CAACwB,SAAT,GAAqBA,SAArB;AACA,aAAOxB,QAAQ,CAACuB,OAAD,CAAf;AACD;;;;;;AAEH,eAAe3B,WAAf","sourcesContent":["import axios from 'axios'\r\nimport qs from 'qs'\r\n// import { Toast } from 'mint-ui'\r\nimport { getToken} from '../utils/utils.js'\r\naxios.defaults.headers.post['Content-Type'] = \"'Content-Type': 'multipart/form-data'\";\r\n//axios.defaults.headers.post['Content-Type'] = 'application/json'\r\naxios.defaults.timeout = 48000\r\n\r\n// 前端的axios添加withCredentials属性\r\naxios.defaults.withCredentials = true\r\n\r\nclass HttpRequest {\r\n    constructor(baseUrl = baseURL) {\r\n      this.baseUrl = baseUrl\r\n      // console.log(this.baseUrl)\r\n    }\r\n    getInsideConfig() {\r\n      const config = {\r\n        baseURL: this.baseUrl\r\n      }\r\n      return config\r\n    }\r\n    interceptors(instance, url) {\r\n      // 请求拦截\r\n      instance.interceptors.request.use(config => {\r\n        if (config.method === 'get') {\r\n          config.params = {\r\n            ...config.params,\r\n            _t: new Date().getTime()\r\n          }\r\n        }\r\n        if(config.method==='post'){\r\n          config.headers.post['Content-Type'] = \"'Content-Type': 'multipart/form-data'\";\r\n        }\r\n        \r\n        if(getToken){\r\n           config.headers.Authorization = 'Bearer '+`${localStorage.token}`\r\n        }\r\n\r\n        if (config.isForm){\r\n          config.headers['Content-Type'] = 'application/x-www-form-urlencoded';\r\n          config.data = qs.stringify(config.data)\r\n        }\r\n        \r\n        return config\r\n      }, error => {\r\n        return Promise.reject(error)\r\n      })\r\n      // 响应拦截\r\n      instance.interceptors.response.use(res => {\r\n        res = res.data\r\n        if (res.code == 10021) {\r\n          \r\n        }else{\r\n          return Promise.resolve(res)\r\n        }\r\n        \r\n      }, error => {\r\n        return Promise.reject(error)\r\n      })\r\n    }\r\n    request(options, noShowTip) {\r\n      const instance = axios.create()\r\n      options = Object.assign(this.getInsideConfig(), options)\r\n      this.interceptors(instance, options.url)\r\n      instance.noShowTip = noShowTip\r\n      return instance(options)\r\n    }\r\n  }\r\n  export default HttpRequest;"]}]}